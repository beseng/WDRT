

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the bemio.io Module &mdash; bemio v1.0a0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="bemio v1.0a0 documentation" href="index.html"/>
        <link rel="next" title="Tutorials" href="tutorials.html"/>
        <link rel="prev" title="Installing VTK with Python Bindings" href="vtk.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> bemio</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Downloading and Installing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installing.html#downloading-bemio">Downloading bemio</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html#installing-quick-start-for-python-beginners">Installing: Quick Start for Python Beginners</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html#installing-for-experienced-python-users">Installing: For Experienced Python Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vtk.html">Installing VTK with Python Bindings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vtk.html#osx">OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="vtk.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="vtk.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Using the bemio.io Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#loading-data">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculating-impulse-response-functions-and-sate-space-coefficients">Calculating Impulse Response Functions and Sate Space Coefficients</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-the-data-to-the-standard-bemio-format">Writing the Data to the Standard bemio Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-data-files">Tutorial Data Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#available-tutorials">Available Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module_doc.html">bemio Module Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="module_doc.html#bemio-io">bemio.io</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_doc.html#bemio-data-structures">bemio.data_structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_doc.html#bemio-mesh-utilities">bemio.mesh_utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">bemio</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Using the bemio.io Module</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/api_io.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="using-the-bemio-io-module">
<h1>Using the bemio.io Module<a class="headerlink" href="#using-the-bemio-io-module" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to build custom data readers for NEMOH, WAMIT, and AQWA output data using the bemio.io module.</p>
<div class="section" id="loading-data">
<h2>Loading Data<a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h2>
<p>Users can load data by interacting with the following with the following bemio modules</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="module_doc.html#module-bemio.io.nemoh" title="bemio.io.nemoh"><code class="xref py py-mod docutils literal"><span class="pre">bemio.io.nemoh</span></code></a></li>
<li><a class="reference internal" href="module_doc.html#module-bemio.io.wamit" title="bemio.io.wamit"><code class="xref py py-mod docutils literal"><span class="pre">bemio.io.wamit</span></code></a></li>
<li><a class="reference internal" href="module_doc.html#module-bemio.io.aqwa" title="bemio.io.aqwa"><code class="xref py py-mod docutils literal"><span class="pre">bemio.io.aqwa</span></code></a></li>
</ul>
</div></blockquote>
<p>The Python code below shows how a user would use bemio to read NEMOH, WAMIT, and AQWA data. Notice that the <code class="xref py py-mod docutils literal"><span class="pre">bemio.io</span></code> objects are used to create data objects that contain the hydrodynamic data from the data files produced by the hydrodynamic simulation codes.:</p>
<div class="highlight-python"><div class="highlight"><pre>from bemio.io.nemoh import read as read_nemoh  # Import NEMOH module
from bemio.io.wamit import read as read_wamit  # Import WAMIT module
from bemio.io.aqwa import read as read_aqwa   # Import AQWA module

# Read  NEMOH data into the nemoh_data object
nemoh_data_obj = read_nemoh(sim_dir=&#39;$BEMIO_SOURCE/tutorials/nemoh/data/&#39;)

# Read data from a WAMIT .out file into the wamit_data object
wamit_data_obj = read_wamit(out_file=&#39;$BEMIO_SOURCE/tutorials/wamit/rm3/wamit_data/rm3.out&#39;)

# Read data from a AQWA .lis file into the aqwa_data object
aqwa_data_obj = read_aqwa(hydro_file=&#39;$BEMIO_SOURCE/tutorials/aqwa/aqwa_example_data.AH1&#39;, list_file=&#39;&#39;$BEMIO_SOURCE/tutorials/aqwa/aqwa_example_data.LIS&#39;)
</pre></div>
</div>
</div>
<div class="section" id="data-objects">
<span id="irf-and-ss"></span><h2>Data Objects<a class="headerlink" href="#data-objects" title="Permalink to this headline">¶</a></h2>
<p>The bemio data objects described in the previous contain BEM simulation data stored in a standard format. Details on the bem data forma can be found here <a class="reference internal" href="module_doc.html#module-bemio.data_structures.bem" title="bemio.data_structures.bem"><code class="xref py py-mod docutils literal"><span class="pre">bemio.data_structures.bem</span></code></a></p>
</div>
<div class="section" id="calculating-impulse-response-functions-and-sate-space-coefficients">
<h2>Calculating Impulse Response Functions and Sate Space Coefficients<a class="headerlink" href="#calculating-impulse-response-functions-and-sate-space-coefficients" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Calculate the radiation damping impulse response functions</span>
<span class="n">nemoh_data_obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">calc_irf_radiation</span><span class="p">()</span>

<span class="c"># Calculate the state space coefficients corresponding to the radiation damping IRFs</span>
<span class="n">nemoh_data_obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">calc_ss_radiation</span><span class="p">()</span>

<span class="c"># Calculate the excitation force impulse response function</span>
<span class="n">nemoh_data_obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">calc_ss_excitation</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-the-data-to-the-standard-bemio-format">
<h2>Writing the Data to the Standard bemio Format<a class="headerlink" href="#writing-the-data-to-the-standard-bemio-format" title="Permalink to this headline">¶</a></h2>
<p>bemio provides a consistent format to store BEM simulation data from NEMOH, WAMT, AQWA. The bemio format uses the <a class="reference external" href="http://www.hdfgroup.org/HDF5/">Hierarchical Data Format 5 (HDF5)</a>, a data structure that is similar to a computers file system, to store complex data in a simple format. HDF5 files can be easily viewed and modified with <a class="reference external" href="http://www.hdfgroup.org/products/java/hdfview/">HDF5VIEW</a>.</p>
<p><a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim">WEC-Sim</a> uses the bemio format as an input file for hydrodynamic data used in wave energy converter simulations.</p>
<p>The bemio <a class="reference internal" href="module_doc.html#bemio.io.output.write_hdf5" title="bemio.io.output.write_hdf5"><code class="xref py py-meth docutils literal"><span class="pre">bemio.io.output.write_hdf5()</span></code></a> function can be used to write the data to a SHDF file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import the bem module</span>
<span class="kn">from</span> <span class="nn">bemio.io.output</span> <span class="kn">import</span> <span class="n">write_hdf5</span>

<span class="c"># Write the data to a SHDF file named shdf_example.h5</span>
<span class="n">write_hdf5</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">nemoh_data_obj</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Once the data is written to the HDF5 file, it can be viewed using <a href="#id1"><span class="problematic" id="id2">`HDFVIEW`_</span></a>. The figure below shows the structure of the SHDF produced by bemio from the NEMOH data. Note that the NEMOH simulation was of a two-body point absorber.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/rm3_hdf5.png"><img alt="_images/rm3_hdf5.png" src="_images/rm3_hdf5.png" style="width: 600pt;" /></a>
</div>
<p>As shown in the figure above above, the SHDF contains three top levels:</p>
<blockquote>
<div><dl class="docutils">
<dt><code class="docutils literal"><span class="pre">bem_data</span></code>:</dt>
<dd>This folder contains the raw and unprocessed output data files from the BEM code</dd>
<dt><code class="docutils literal"><span class="pre">bodyN</span></code>:</dt>
<dd>The folders named <code class="docutils literal"><span class="pre">body1</span></code>, <code class="docutils literal"><span class="pre">body2</span></code>, ... <code class="docutils literal"><span class="pre">bodyN</span></code> contain the processed data for that body. In the case above there are two bodies, corresponding to the two bodies of the two body point absorber. Notice that the folders beneath each <code class="docutils literal"><span class="pre">bodyN</span></code> folder contains the hydrodynamic data for that body.</dd>
<dt><code class="docutils literal"><span class="pre">simulatino_parameters</span></code>:</dt>
<dd>This data structure contains simulation parameters from the BEM simulation that are independent of the body number. For example, the <code class="docutils literal"><span class="pre">water_depth</span></code> variable contains the water depth used during the BEM simulation</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="vtk.html" class="btn btn-neutral" title="Installing VTK with Python Bindings"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, National Renewable Energy Laboratory and Sandia National Laboratories.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v1.0a0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>